<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
	<xsl:output indent="yes"/>
	<!--
definition of variables
choose appropriate values that fit your needs
-->
	<xsl:template match="/">

//--file "menu.jsp" -------------------------------------------
<xsl:text disable-output-escaping="yes">
&lt;!-- ATTENTION!!!!! Do not edit!!! This file was generated by generate_menu.xsl. --&gt;

&lt;%@ taglib uri="/WEB-INF/struts-tiles.tld" prefix="tiles" %&gt;
	</xsl:text>
		<tiles:insert page="/my-module/layout/dealerextranetLayout.jsp" flush="true">
			<tiles:put name="navigation" value="/my-module/tiles/navigation.jsp"/>
			<tiles:put name="body" value="/my-module/dbformspages/menu_body.jsp"/>
			<tiles:put name="footer" value="/my-module/tiles/footer.jsp"/>
		</tiles:insert>
	
//--file "menu_body.jsp" -------------------------------------------
		<xsl:text disable-output-escaping="yes">
&lt;!-- ATTENTION!!!!! Do not edit!!! This file was generated by generate_menu.xsl. --&gt;

&lt;%@ taglib uri="/WEB-INF/struts-html.tld" prefix="html" %&gt;
	</xsl:text>
		<xsl:variable name="urlPrefix">
			<xsl:value-of select="/dbforms-config/url-prefix"/>
		</xsl:variable>
		<table cellspacing="0" cellpadding="0" class="box">
			<tr>
				<xsl:for-each select="/dbforms-config/table">
					<!-- origTableName is the original table name -->
					<xsl:variable name="origTableName">
						<xsl:value-of select="@name"/>
					</xsl:variable>
					<!-- tableName is the name with schema name corrected -->
					<xsl:variable name="tableName">
						<xsl:choose>
							<!-- contains '.' means we have tables from other schema (owner) but only one '.' or the stylesheet will not work -->
							<xsl:when test="contains(@name, '.')">
								<xsl:value-of select="substring-before(@name, '.')"/>
								<xsl:value-of select="'_'"/>
								<xsl:value-of select="substring-after(@name, '.')"/>
							</xsl:when>
							<xsl:otherwise>
								<xsl:value-of select="@name"/>
							</xsl:otherwise>
						</xsl:choose>
					</xsl:variable>
					<td>
						<html:link page="{$urlPrefix}{$tableName}_list.jsp">
							<xsl:value-of select="$tableName"/>
						</html:link>
					</td>
					<xsl:if test="(position()-1) mod 3 = 2">
						<xsl:text disable-output-escaping="yes">&lt;/tr&gt;</xsl:text>
						<xsl:text disable-output-escaping="yes">&lt;tr&gt;</xsl:text>
					</xsl:if>
				</xsl:for-each>
			</tr>
		</table>
	</xsl:template>
</xsl:stylesheet>
