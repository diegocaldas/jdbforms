<?xml version="1.0" encoding="UTF-8"?>
 
	<chapter>
		<title>Internationalization (i18n) Support
</title>
		<sect1>
			<title>Defining Resource Bundles
</title>
			<para>Resource bundles are made up of 1 or more .properties files.  Each file contains a key-value reference which is used to retrieve and display text in a given language.  Properties files, defined to be of the same resource bundle, have the following naming structure:
</para>
			<para>A common prefix is used to associate files into a bundle.
</para>
			<para>The locale, for which this file is valid for, is used as a suffix.
</para>
			<para>A default properties file exists in order to support non-defined locales.  This file does not have a (locale) suffix associated to its name.  All files must be located in a directory which is in the classpath.
</para>
			<para>
				<emphasis role="bold">ApplicationResources.properties</emphasis>
			</para>
			<screen>
        msg.bienvenue.1=&lt;B&gt;Bienvenue dans l'application XYZ&lt;/B&gt;           
        msg.bienvenue.2=Heureux de vous servir en franais.
        boutton.login=Authentifier
        boutton.logout=Quitter
 
		</screen>
			 <para/>
			<para>
				<emphasis role="bold">ApplicationResources_fr_CA.properties</emphasis>
			</para>
			<screen>
        msg.bienvenue.1=&lt;B&gt;Bienvenue dans l'application XYZ&lt;/B&gt;
        msg.bienvenue.2=Heureux de servir nos amis Canadiens en franais.
        boutton.login=Authentifier
        boutton.logout=Quitter
 
	 
			</screen>
                        <para/>
			<para>
				<emphasis role="bold">ApplicationResources_en.properties</emphasis>
			</para>
			
			<screen>
        msg.bienvenue.1=&lt;B&gt;Welcome in XYZ application&lt;/B&gt;
        msg.bienvenue.2=Happy to serve you in english.
        boutton.login=Login
        boutton.logout=Logout
  
			</screen><para/>
			<para>
				<emphasis role="bold">ApplicationResources_es.properties</emphasis>
			</para>
			 <screen>
        msg.bienvenue.1=&lt;B&gt;Recepcin en la aplicacin XYZ&lt;/B&gt;
        msg.bienvenue.2=Feliz servirle en espaol
        boutton.login=Conexin
        boutton.logout=Fin de comunicacin
			</screen>
                        <para/>
			<para>In this example, the default language is French.  In addition to the default language, this application supports English and Spanish.  For French speaking clients from Canada, a special resource has also been developed.
</para>
		</sect1>
		<sect1>
			<title>Setting up DbForms
</title>
			<para>To define that a resource bundle is to be used within a dbForms application, the resource bundle root name must be specified in the web.xml deployment descriptor (associated to the dbForms config servlet):
</para>
			 
				<screen>
    &lt;web-app&gt;&lt;!--=========== DbForms Configuration Servlet ===========--&gt;
        &lt;servlet&gt; 
            &lt;servlet-name&gt;org.dbforms.ConfigServlet&lt;/servlet-name&gt; 
            &lt;servlet-class&gt;org.dbforms.ConfigServlet&lt;/servlet-class&gt; 
		&lt;init-param&gt; 
                    &lt;param-name&gt;log4j.configuration&lt;/param-name&gt; 
                    &lt;param-value&gt;log4j.properties&lt;/param-value&gt; 
		&lt;/init-param&gt;
                <emphasis role="bold">&lt;init-param&gt;</emphasis> 
                    &lt;param-name&gt;resourceBundle&lt;/param-name&gt; 
                    &lt;param-value&gt;ApplicationResources&lt;/param-value&gt; 
		&lt;/init-param&gt; 
            &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; 
	&lt;/servlet&gt; 
		</screen>
			 
		</sect1>
		<sect1>
			<title>Using i18n within DbForms
</title>
			<para>Instead of 'hard coding' messages, labels, etc., dbForms has made available the 'message' tag.  This tag can be used to display data retrieved via a resource bundle.  The actual properties file used to retrieve the text is dependant on the end-user's locale-setting.
</para>
			<screen>
    &lt;%@ taglib uri="/WEB-INF/dbforms.tld" prefix="db" %&gt;
    
        &lt;! - - Retrieving a message  - - &gt; 
        
        &lt;db:message key="msg.bienvenue.1"/&gt; 
		
        &lt;BR&gt;&lt;BR&gt; 
		
        &lt;center&gt;&lt;db:message key="msg.bienvenue.2"/&gt;&lt;/center&gt; 
		
        &lt;BR&gt;&lt;BR&gt; 
		</screen>
			<para>Another feature supported, is the ability to have dbForm button tags display language-specific captions.  This is achieved by setting the 'captionResource' attribute (in the dbform tag) to true.  When this feature is turned on, text in the caption attribute (in a button tag) is recognized as a key and is used to lookup text in the appropriate resource bundle.  If the key cannot be found, the caption value is displayed as is.
</para>
			
<screen>
    &lt;%@ taglib uri="/WEB-INF/dbforms.tld" prefix="db" %&gt;&lt;! - - Lookup caption in associated resource bundle - - &gt; 
		
        &lt;db:form  tableName="myTable" <emphasis role="bold">captionResource="true" </emphasis>&gt; 
		
            &lt;db:gotoButton caption="<emphasis role="bold">button.login</emphasis>" destination="/login.jsp" /&gt; 
            
            &lt;db:gotoButton caption="<emphasis role="bold">button.logout</emphasis>" destination="/logout.jsp" /&gt; 
		 
        &lt;/db:form&gt; 
		 </screen>
			<para/>
		</sect1>
	</chapter>
 
