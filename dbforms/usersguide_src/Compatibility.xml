<?xml version="1.0" encoding="UTF-8"?>
<!--
    Document   : compatibility.xml
    Created on : April 6, 2003, 11:04 PM
    Author     : javauser
    Description:
        Purpose of the document follows.
-->
<chapter>
  <title>Compatibility notes:</title>
  <sect1><title>1.1.3</title>
  <para>The 
    <computeroutput>format</computeroutput> attributes of tags 
    <computeroutput>queryData</computeroutput> and 
    <computeroutput>tableData</computeroutput> have different
sementics now that are not 100% backwards compatible to the 1.1.2 and earlier releases.
  </para>
  <para>See the 
    <ulink url="../../taglib/DbFormsTags_Frame.html">
      <citetitle>Tag Library </citetitle>
    </ulink> from more info.
  </para>
  <para>Also, the insert button on previously generated list_and_single.jsp pages
will not appear unless the attribute 
    <computeroutput>showAlways="true"</computeroutput> is added to the 

    <computeroutput>insertButtonTag</computeroutput>. Otherwise, it will only appear in insert mode such as through a NavNewEvent.
 
  </para>
  </sect1>
  <sect1> 
    <title>1.1.4pr1</title>
    <para>
      If you are upgrading from 1.1.3 or from 1.1.4dev (first dev release), you must make three changes to 
      <computeroutput>dbforms-config.xml</computeroutput></para>
      <para>These changes need to be made to the 
        <computeroutput>&lt;servlet-class&gt;</computeroutput> element only and the  
        <computeroutput>&lt;servlet-name&gt; </computeroutput>can remain as it is in your 
        <computeroutput>dbforms-config.xml</computeroutput>
      </para>
      <orderedlist numeration="lowerroman">
        <listitem>
          <para>
            <screen>
  From:    
    <computeroutput>&lt;servlet-name&gt;config&lt;/servlet-name&gt;</computeroutput>
    <computeroutput>&lt;servlet-class&gt;org.dbforms.ConfigServlet&lt;/servlet-class&gt;</computeroutput>

  To:
    <computeroutput>&lt;servlet-name&gt;config&lt;/servlet-name&gt;</computeroutput>
    <computeroutput>&lt;servlet-class&gt;org.dbforms.servlets.ConfigServlet&lt;/servlet-class&gt;</computeroutput>
            </screen>
          </para>
        </listitem>
        <listitem>
          <para>
            <screen>
  From:
    <computeroutput>&lt;servlet-name&gt;control&lt;/servlet-name&gt;</computeroutput>
    <computeroutput>&lt;servlet-class&gt;org.dbforms.Controller&lt;/servlet-class&gt;</computeroutput>

  To:    
    <computeroutput>&lt;servlet-name&gt;control&lt;/servlet-name&gt;</computeroutput>
    <computeroutput>&lt;servlet-class&gt;org.dbforms.servlets.Controller&lt;/servlet-class&gt;</computeroutput>
            </screen>
          </para>
        </listitem>
        <listitem>
          <para>
            <screen>
  From:
    <computeroutput>&lt;servlet-name&gt;file&lt;/servlet-name&gt;</computeroutput>
    <computeroutput>&lt;servlet-class&gt;org.dbforms.util.FileServlet&lt;/servlet-class&gt;</computeroutput>
    
  To:
    <computeroutput>&lt;servlet-name&gt;file&lt;/servlet-name&gt;</computeroutput>
    <computeroutput>&lt;servlet-class&gt;org.dbforms.servlets.FileServlet&lt;/servlet-class&gt;</computeroutput>
            </screen>
          </para>
        </listitem>
      </orderedlist>
      <para>
        Not doing so will result in a error message:
        <screen>
  java.lang.ClassCastException
    at org.dbforms.taglib.DbFormTag.setPageContext(DbFormTag.java:1087)
    at org.apache.jsp.menu_jsp._jspService(menu_jsp.java:91)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:137)...
         </screen>
      </para>
    
    <para>Similarly, to use JapsperReports please adjust the  <computeroutput>&lt;servlet-class&gt;</computeroutput> to be:
    <screen>
    &lt;servlet&gt;
        &lt;servlet-name&gt;startreport&lt;/servlet-name&gt;
        &lt;display-name&gt;startreport&lt;/display-name&gt;
        &lt;servlet-class&gt;org.dbforms.<emphasis role="bold">servlets.</emphasis>StartReportServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;
     </screen>
    </para>
   
  </sect1>
  <sect1> 
    <title>1.1.4pr2</title>
    <para>(also see note for 1.1.4pr1 above)  <emphasis role="italic">When upgrading from any previous release please note that:</emphasis>
    To have better control of the fields written to the datebase we changed the interceptor interface of the 
preUpdate/preInsert/preDelete events to: 
    <screen>
         public int preXXXXXX(HttpServletRequest request,  Table table, <emphasis role="bold">FieldValues</emphasis> fieldValues,
							  DbFormsConfig config, Connection con) throws ValidationException
    </screen>Now you have full control over the fields written to the datbase, you can remove, change and add fields.</para>

    <para><emphasis role="bold">You only need to change the interfaces in your old interceptor code. Changing the code should not be necessary because the 
           interface of the FieldValues class is nearly the same as the previously used Hashtable.</emphasis> </para>
    <para><emphasis role="italic"> If you are upgrading from 1.1.4pr1,</emphasis> please adjust the following for the <computeroutput>&lt;filterCondition&gt;</computeroutput> tag (used embedded within the new <computeroutput>&lt;filter&gt;</computeroutput> tag).
You must change your filter values for strings to not use the ''! This is now done automatically.</para>
    <para>So: 
    <screen>	name like '?' </screen>
must be changed to
    <screen>	name like ? </screen>
    </para>
  </sect1>
</chapter>
